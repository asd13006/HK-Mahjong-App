/* ==== æ ¸å¿ƒç’°å¢ƒè¨­å®š ==== */
* { box-sizing: border-box; margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; touch-action: manipulation; }

/* ğŸ”¥ çµ‚æ¥µç¬¬ä¸€é“é˜²ç·šï¼šå°‡æ ¹ç¯€é»èˆ‡ body åŒæ™‚é–æ­» */
/* ğŸ”¥ çµ‚æ¥µç¬¬ä¸€é“é˜²ç·šï¼šé–æ­»é‚Šç•Œï¼Œä¸¦æ–½å±•éš±å½¢æ²è»¸é­”æ³• */
html, body {
    overscroll-behavior-y: none;
    overscroll-behavior-x: none;
    
    /* éš±è— Firefox çš„æ²è»¸ */
    scrollbar-width: none; 
    /* éš±è— IE/Edge çš„æ²è»¸ */
    -ms-overflow-style: none; 
}

/* éš±è— Chrome, Safari, Opera (åŒ…å« iOS/Android é è¨­ç€è¦½å™¨) çš„æ²è»¸ */
html::-webkit-scrollbar, body::-webkit-scrollbar {
    display: none;
}

body { 
    background-color: #e0f2fe; 
    color: #1e293b; 
    display: flex; justify-content: center; min-height: 100vh; position: relative; 
    padding-top: max(30px, env(safe-area-inset-top) + 10px); padding-right: 15px; 
    
    /* ğŸ”¥ æ ¸å¿ƒä¿®æ”¹ï¼šå°‡åº•éƒ¨çš„å®‰å…¨è·é›¢æ”¶ç¸®åˆ°æœ€æ¥µé™çš„è²¼åˆç‹€æ…‹ */
    padding-bottom: max(8px, env(safe-area-inset-bottom)); 
    
    padding-left: 15px; 
    touch-action: pan-y; 
    -webkit-user-select: none; -moz-user-select: none; user-select: none; 
    -webkit-tap-highlight-color: transparent; 
    transition: color 0.8s ease; 
}

.bg-layer { position: fixed; inset: 0; z-index: -2; opacity: 0; transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1); pointer-events: none; }
.bg-base { background: linear-gradient(135deg, #e0f2fe 0%, #f3e8ff 50%, #fce7f3 100%); opacity: 1; }
.bg-success { background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); }
.bg-limit { background: linear-gradient(135deg, #fef9c3 0%, #fde047 100%); }
.bg-failure { background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%); }

body.success-mode .bg-base { opacity: 0; } body.success-mode .bg-success { opacity: 1; } body.success-mode { color: #172554; }
body.limit-mode .bg-base { opacity: 0; } body.limit-mode .bg-limit { opacity: 1; } body.limit-mode { color: #422006; }
body.failure-mode .bg-base { opacity: 0; } body.failure-mode .bg-failure { opacity: 1; } body.failure-mode { color: #450a0a; }

.app-container { width: 100%; max-width: 420px; display: flex; flex-direction: column; gap: 18px; position: relative; z-index: 1; padding-bottom: 20px; flex: 1; }

.glass-card { position: relative; backdrop-filter: blur(20px) saturate(120%); -webkit-backdrop-filter: blur(20px) saturate(120%); border-radius: 28px; border: 1px solid rgba(255, 255, 255, 0.6); box-shadow: 0 8px 32px rgba(31, 38, 135, 0.10), inset 0 1px 1px rgba(255, 255, 255, 0.8); padding: 20px; transform: translateZ(0); z-index: 1; transition: border-color 0.8s ease, box-shadow 0.8s ease, transform 0.3s ease; }
.glass-card::before { content: ""; position: absolute; inset: 0; border-radius: inherit; z-index: -1; background-color: rgba(255, 255, 255, 0.5); transition: background-color 0.8s cubic-bezier(0.4, 0, 0.2, 1); will-change: background-color; }

body.success-mode #statusCard { border-color: rgba(147, 197, 253, 0.8); box-shadow: 0 12px 36px rgba(59, 130, 246, 0.2), inset 0 1px 1px rgba(255, 255, 255, 0.5); } body.success-mode #statusCard::before { background-color: rgba(219, 234, 254, 0.7); }
body.limit-mode #statusCard { border-color: rgba(253, 224, 71, 0.8); box-shadow: 0 12px 36px rgba(234, 179, 8, 0.2), inset 0 2px 15px rgba(250, 204, 21, 0.3); } body.limit-mode #statusCard::before { background-color: rgba(254, 249, 195, 0.7); }
body.failure-mode #statusCard { border-color: rgba(252, 165, 165, 0.8); box-shadow: 0 12px 36px rgba(239, 68, 68, 0.2), inset 0 1px 1px rgba(255, 255, 255, 0.5); } body.failure-mode #statusCard::before { background-color: rgba(254, 226, 226, 0.7); }

.status-title, .score-display, .pattern-name { transition: opacity 0.25s ease, transform 0.25s ease, color 0.3s ease; }
.content-fade-out .status-title, .content-fade-out .score-display, .content-fade-out .pattern-name { opacity: 0; transform: scale(0.95); }

.status-header { text-align: center; }
.status-title { font-size: 13px; opacity: 0.6; letter-spacing: 2px; margin-bottom: 8px; text-transform: uppercase; font-weight: 600; color: #64748b; }

/* ğŸ”¥ ä¿®æ­£ 1ï¼šè¨ˆåˆ†æ¿æ°´å¹³åŸºæº–ç·šå°é½Š (Baseline Alignment) è§£æ±ºåœ–å››å•é¡Œ */
.score-display { 
    display: flex; align-items: baseline; justify-content: center; gap: 4px;
    font-size: 64px; font-weight: 300; line-height: 1; margin-bottom: 12px; color: #0f172a; text-shadow: 0 2px 10px rgba(0,0,0,0.05); font-variant-numeric: tabular-nums; 
}
.score-display span:last-child { margin-left: 0 !important; } /* æŠµéŠ· HTML è£¡çš„ marginï¼Œæ”¹ç”¨ flex gap */

.heartbeat-pop { animation: heartbeat 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; will-change: transform; }
@keyframes heartbeat { 0% { transform: scale(1); } 40% { transform: scale(1.15); } 100% { transform: scale(1); } }

.pattern-name { font-size: 15px; font-weight: 500; min-height: 24px; display: flex; flex-wrap: wrap; justify-content: center; gap: 6px;}

.pattern-tag { background: rgba(255, 255, 255, 0.7); border: 1px solid rgba(255, 255, 255, 0.8); color: #334155; padding: 4px 12px; border-radius: 14px; font-size: 13px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); font-weight: 600; opacity: 0; transform: scale(0.8) translateY(10px); animation: tagSpringIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; will-change: transform, opacity; }
@keyframes tagSpringIn { 100% { opacity: 1; transform: scale(1) translateY(0); } }
.pattern-tag.highlight { background: rgba(250, 204, 21, 0.3); border-color: rgba(250, 204, 21, 0.6); color: #854d0e; }
.pattern-tag.flower { background: rgba(244, 114, 182, 0.3); border-color: rgba(244, 114, 182, 0.6); color: #9d174d; }
.pattern-tag.wind { background: rgba(56, 189, 248, 0.3); border-color: rgba(56, 189, 248, 0.6); color: #0c4a6e; }

.dynamic-island { 
    background: rgba(255, 255, 255, 0.7); 
    backdrop-filter: blur(20px) saturate(150%); 
    -webkit-backdrop-filter: blur(20px) saturate(150%); 
    border: 1px solid rgba(255, 255, 255, 0.5); 
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08), inset 0 1px 1px rgba(255, 255, 255, 0.8); 
    border-radius: 30px; 
    margin: 0 auto; 
    width: 100%; 
    max-width: 180px; 
    display: flex; 
    flex-direction: column; 
    overflow: hidden; 
    color: #334155;
    
    /* ğŸ”¥ å„ªåŒ– 1ï¼šç²¾æº–æŒ‡å®šå‹•ç•«å±¬æ€§ï¼Œçµ•å°ä¸ç”¨ all */
    transition: max-width 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), border-radius 0.4s ease, background 0.4s ease; 
    
    /* ğŸ”¥ å„ªåŒ– 2ï¼šå¼·åˆ¶é–‹å•Ÿç¨ç«‹çš„ GPU æ¸²æŸ“å±¤ */
    transform: translateZ(0); 
    will-change: max-width, border-radius, transform; 
}
.dynamic-island.expanded { max-width: 420px; border-radius: 28px; background: rgba(255, 255, 255, 0.6); }
.island-header { padding: 12px 20px; display: flex; justify-content: center; align-items: center; gap: 8px; cursor: pointer; user-select: none; }

.island-title { font-size: 13px; font-weight: 700; color: #475569; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: inline-block; transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.3s ease, color 0.3s ease; }
.island-title.slide-out { transform: translateY(-10px); opacity: 0; transition: transform 0.2s ease-in, opacity 0.2s ease-in; }
.island-title.slide-in { transform: translateY(10px); opacity: 0; transition: none; }

.island-chevron { font-size: 10px; opacity: 0.6; transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); color: #64748b; }
.dynamic-island.expanded .island-chevron { transform: rotate(-180deg); }

/* 2. æ”¾æ£„æ¥µè€— CPU çš„ Grid æ’ç‰ˆå‹•ç•«ï¼Œæ”¹ç”¨å‚³çµ±ä¸”æµæš¢çš„ max-height */
.island-content-grid { 
    display: block; /* ç§»é™¤ display: grid */
    max-height: 0;  /* æ”¹ç”¨ max-height éš±è— */
    
    /* ğŸ”¥ å„ªåŒ– 3ï¼šä½¿ç”¨å°è€æ‰‹æ©Ÿæœ€å‹å–„çš„ max-height å‹•ç•« */
    transition: max-height 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); 
    will-change: max-height;
}

/* 3. å±•é–‹æ™‚çš„ç‹€æ…‹ï¼šçµ¦äºˆè¶³å¤ çš„é«˜åº¦ */
.dynamic-island.expanded .island-content-grid { 
    max-height: 480px; /* çµ¦äºˆè¶³å¤ å®¹ç´è¨­å®šé¸é …çš„é«˜åº¦ */
}

.island-content-inner { min-height: 0; overflow: hidden; display: flex; flex-direction: column; }
.island-section { padding: 0 16px 16px 16px; opacity: 0; transform: translateY(-10px); transition: opacity 0.2s ease, transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
.dynamic-island.expanded .island-section { opacity: 1; transform: translateY(0); }
.dynamic-island.expanded .island-section:nth-child(1) { transition-delay: 0.05s; }
.dynamic-island.expanded .island-section:nth-child(3) { transition-delay: 0.10s; }
.dynamic-island.expanded .island-section:nth-child(5) { transition-delay: 0.15s; }
.island-divider { height: 1px; background: rgba(0, 0, 0, 0.06); margin: 0 16px 12px 16px; opacity: 0; transition: opacity 0.3s; }
.dynamic-island.expanded .island-divider { opacity: 1; }
.island-section-header { font-size: 12px; opacity: 0.8; margin-bottom: 10px; display: flex; justify-content: space-between; font-weight: 700; color: #475569; letter-spacing: 1px; }

/* ğŸ”¥ ä¿®æ­£ 2ï¼šåŠ å…¥ minmax(0, 1fr) èˆ‡æº¢å‡ºéš±è—ï¼Œè§£æ±ºåœ–äºŒ/åœ–ä¸‰çš„ç‰ˆé¢æ’ç ´å•é¡Œ */
.conditions-wrapper { 
    display: grid; 
    grid-template-columns: repeat(6, minmax(0, 1fr)); 
    gap: 8px; 
}

/* ==== âœ¨ 1. ç‰Œå±€è¨­å®šæ¨™ç±¤æœ¬é«” (çœŸãƒ»å†°å¡Šç»ç’ƒæ“¬æ…‹) ==== */
.condition-chip { 
    padding: 8px 2px; 
    border-radius: 20px; 
    font-size: 11px; 
    font-weight: 600; 
    
    /* ğŸŒŸ æŠ½ä¹¾ç™½è‰²ç´ ï¼šåªä¿ç•™ 15% çš„æ¥µè‡´æ¸…é€ç™½åº• */
    background: rgba(255, 255, 255, 0.15); 
    
    /* ğŸŒŸ å¼·åŒ–é€è¦–ï¼šæé«˜é£½å’Œåº¦ï¼Œè®“åº•ä¸‹çš„æ¼¸å±¤é€ä¸Šä¾†æ›´é®®è±” */
    backdrop-filter: blur(12px) saturate(150%);
    -webkit-backdrop-filter: blur(12px) saturate(150%);
    
    /* ğŸŒŸ 3D é‚Šç·£é«˜å…‰ï¼šæ¨¡æ“¬é ‚éƒ¨å…‰æºæ‰“åœ¨ç»ç’ƒåˆ‡é‚Šä¸Šçš„åå…‰ */
    border: 1px solid rgba(255, 255, 255, 0.2); 
    border-top: 1px solid rgba(255, 255, 255, 0.7); 
    border-left: 1px solid rgba(255, 255, 255, 0.5); 
    
    /* ğŸŒŸ å…§éƒ¨å¾®å…‰èˆ‡å¤–éƒ¨é™°å½±ï¼šæ‹‰é–‹ç»ç’ƒèˆ‡åº•å±¤çš„ç©ºé–“æ„Ÿ */
    box-shadow: inset 0 1px 1px rgba(255, 255, 255, 0.8), 0 4px 12px rgba(0, 0, 0, 0.05);
    
    /* æ–‡å­—ç¨å¾®åŠ æ·±ä¸€é»é»ï¼Œç¢ºä¿åœ¨é€æ˜èƒŒæ™¯ä¸‹çš„é–±è®€æ€§ */
    color: #475569; 
    
    cursor: pointer; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    text-align: center; 
    white-space: nowrap; 
    letter-spacing: -0.2px; 
    grid-column: span 2; 
    position: relative;
    z-index: 1; 
    transition: color 0.3s ease, background-color 0.3s ease, transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), border-color 0.3s ease, box-shadow 0.3s ease, z-index 0s;
    will-change: transform; 
}

/* ==== âœ¨ ç‰Œå±€è¨­å®šæ¨™ç±¤æœ¬é«” (åŠ å…¥æ¯›ç»ç’ƒæ¿¾é¡) ==== */
.condition-chip { 
    padding: 8px 2px; 
    border-radius: 20px; 
    font-size: 11px; 
    font-weight: 600; 
    background: rgba(255, 255, 255, 0.5); 
    
    /* ğŸŒŸ æ–°å¢ï¼šçµ‚æ¥µç»ç’ƒæ“¬æ…‹æ¿¾é¡ */
    backdrop-filter: blur(10px) saturate(120%);
    -webkit-backdrop-filter: blur(10px) saturate(120%);
    
    border: 1px solid rgba(255, 255, 255, 0.8); 
    color: #64748b; 
    cursor: pointer; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    text-align: center; 
    box-shadow: 0 2px 4px rgba(0,0,0,0.05); 
    
    white-space: nowrap; 
    letter-spacing: -0.2px; 
    grid-column: span 2; 
    position: relative;
    z-index: 1; 
    transition: color 0.3s ease, background-color 0.3s ease, transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), border-color 0.3s ease, z-index 0s;
    will-change: transform; 
}

/* 1. å»ºç«‹éš±å½¢çš„ç™¼å…‰æ›¿èº«å±¤ (ç´”è—ç´«ç§‘æŠ€éœ“è™¹ - å…§æ–‚ç‰ˆ) */
.condition-chip::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    z-index: -1;
    border-radius: inherit;
    
    /* ğŸŒŸ åŸæ±åŸå‘³çš„è—ç´«æ¼¸å±¤ */
    background: linear-gradient(135deg, #4da3ff 0%, #8b5cf6 100%);
    
    /* ğŸŒŸ æ ¸å¿ƒæ”¶æŸï¼šå¤§å¹…é™ä½å…‰æšˆæ“´æ•£ç¯„åœ (12px) èˆ‡é€æ˜åº¦ (0.45)ï¼Œä¿ç•™é ‚éƒ¨ç²¾ç·»å¾®å…‰ */
    box-shadow: 
        0 3px 12px rgba(139, 92, 246, 0.45), 
        inset 0 1px 1px rgba(255, 255, 255, 0.4); 
        
    opacity: 0;
    will-change: opacity;
    transition: opacity 0.3s ease-in-out;
}

/* 2. ç•¶è¢«é»æ“Š (Active) æ™‚çš„æœ¬é«”è®ŠåŒ– */
.condition-chip.active {
    background-color: transparent !important; 
    border-color: transparent !important;
    box-shadow: none; 
    
    color: #ffffff;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    
    /* ğŸŒŸ æ ¸å¿ƒæ”¶æŸï¼šå¾®èª¿æ”¾å¤§æ¯”ä¾‹ï¼Œå¾ 1.05 é™ç‚º 1.02ï¼Œä¿ç•™å¯¦é«”å›é¥‹ä½†ä¸æš´æ¼² */
    transform: scale(1.02); 
    
    /* ç¢ºä¿å…‰æšˆåœ¨æœ€ä¸Šå±¤ï¼Œä¸æœƒè¢«é„°å±…åˆ‡æ–· */
    z-index: 10; 
}

/* 3. å–šé†’ç™¼å…‰æ›¿èº«å±¤ */
.condition-chip.active::before {
    opacity: 1; 
}

/* ç¢ºä¿ç‰¹å®šæŒ‰éˆ•è·¨æ¬„è¨­å®šç¶­æŒä¸è®Š */
.condition-chip:nth-child(7), .condition-chip:nth-child(8) { grid-column: span 3; }
@media (max-width: 380px) { .condition-chip { font-size: 10px; letter-spacing: -0.5px; } }

.winds-container { display: flex; gap: 15px; }
.wind-group { flex: 1; display: flex; flex-direction: column; gap: 8px; }
.wind-selector { display: flex; gap: 6px; }
/* ==== âœ¨ é¢¨ä½/åœˆä½æŒ‰éˆ• (åŠ å…¥æ¯›ç»ç’ƒæ¿¾é¡) ==== */
/* ==== âœ¨ 2. é¢¨ä½/åœˆä½æŒ‰éˆ• (çœŸãƒ»å†°å¡Šç»ç’ƒæ“¬æ…‹) ==== */
.wind-btn { 
    flex: 1; 
    padding: 6px 0; 
    text-align: center; 
    border-radius: 8px; 
    
    /* ğŸŒŸ æŠ½ä¹¾ç™½è‰²ç´ èˆ‡å¼·åŒ–é€è¦– */
    background: rgba(255, 255, 255, 0.15); 
    backdrop-filter: blur(12px) saturate(150%);
    -webkit-backdrop-filter: blur(12px) saturate(150%);
    
    /* ğŸŒŸ 3D é‚Šç·£é«˜å…‰èˆ‡åšåº¦é™°å½± */
    border: 1px solid rgba(255, 255, 255, 0.2); 
    border-top: 1px solid rgba(255, 255, 255, 0.7); 
    border-left: 1px solid rgba(255, 255, 255, 0.5); 
    box-shadow: inset 0 1px 1px rgba(255, 255, 255, 0.8), 0 4px 12px rgba(0, 0, 0, 0.05);
    
    font-size: 13px; 
    cursor: pointer; 
    color: #475569; 
    font-weight: 600; 
    transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), background 0.2s, color 0.2s, box-shadow 0.2s, border-color 0.2s; 
    will-change: transform; 
}
.wind-btn.active { background: #ffffff; color: #0f172a; font-weight: 800; box-shadow: 0 4px 12px rgba(0,0,0,0.1); border-color: #fff; }

.flower-grid { display: grid; grid-template-columns: repeat(8, 1fr); gap: 10px; padding: 6px 4px; }
.flower-tile { position: relative; z-index: 1; aspect-ratio: 3/4; background-color: #fcfaf9; border-radius: 8px; cursor: pointer; box-shadow: 0 6px 12px rgba(0,0,0,0.08), inset 0 -2px 1px rgba(0,0,0,0.05); background-size: 88%; background-position: center; background-repeat: no-repeat; overflow: hidden; transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.4s ease; will-change: transform, box-shadow, backdrop-filter; }
.flower-tile.active { 
    transform: scale(1.08) translate3d(0, -2px, 0); /* åŠ å…¥ 3D åŠ é€Ÿ */
    z-index: 10; 
    background-color: rgba(255,255,255,0.3); 
    backdrop-filter: blur(10px) saturate(180%); 
    -webkit-backdrop-filter: blur(10px) saturate(180%); 
    box-shadow: inset 0 0 0 1px rgba(255,255,255, 0.9), inset 0 1px 3px rgba(255,255,255, 0.8), 0 12px 24px rgba(0,0,0,0.15); 
}
.flower-tile::after { content: ""; position: absolute; inset: 0; border-radius: 8px; background: linear-gradient(135deg, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 40%, rgba(255,255,255,0) 100%); opacity: 0; transition: opacity 0.3s ease; pointer-events: none; mix-blend-mode: overlay; }
.flower-tile.active::after { opacity: 1; }

.hand-container { min-height: 120px; }
.hand-header { display: flex; justify-content: space-between; align-items: center; font-size: 13px; opacity: 0.8; margin-bottom: 12px; font-weight: 600; color: #475569; }
.tiles-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 6px; }
.tiles-grid::after { content: ""; grid-column: 1; grid-row: 3; aspect-ratio: 3/4; pointer-events: none; visibility: hidden; }

@keyframes popIn { 0% { opacity: 0; transform: scale(0.6) translate3d(0, 20px, 0); } 100% { opacity: 1; transform: scale(1) translate3d(0, 0, 0); } }
.enter-anim { animation: popIn 0.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; will-change: transform, opacity; }
@keyframes slotExpand { 0% { opacity: 0; transform: scale(0.8); } 100% { opacity: 1; transform: scale(1); } }
.empty-enter-anim { animation: slotExpand 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; will-change: transform, opacity; }

/* âœ¨ é€€å ´æœå‡å‹•ç•« (æ¥µè‡´çµ²æ»‘ç‰ˆ)ï¼šå¾®è“„åŠ›å¾Œé †æš¢å¸å…¥æ¶ˆå¤± */
@keyframes popOut {
    0% { 
        opacity: 1; 
        transform: scale(1) translateZ(0); 
    }
    20% { 
        opacity: 1; 
        /* å¾®å¾®å£“æ‰è“„åŠ›ï¼Œå¹…åº¦ç¸®å°ï¼Œé¿å…è¦–è¦ºä¸Šçš„æŠ½ææ„Ÿ */
        transform: scaleX(1.05) scaleY(0.95) translateZ(0); 
    }
    100% { 
        opacity: 0; 
        /* é †æš¢ç„¡é˜»ç¤™åœ°ç¸®å°åˆ° 0 */
        transform: scaleX(0) scaleY(0) translateZ(0); 
    }
}

.breathing { 
    /* è¦–è¦ºæ¬ºé¨™ï¼šåªå‘¼å¸ 4 æ¬¡ (ç´„ 12 ç§’) å°±æœƒå„ªé›…åœ°åœç•™åœ¨åŸä½ï¼Œæ—¢ä¿ç•™äº†ç™¼ç‰Œæ™‚çš„ç”Ÿå‘½åŠ›ï¼Œåˆèƒ½è®“æ‰‹æ©Ÿé€²å…¥çœé›»ä¼‘çœ  */
    animation: floatBreathing 3s ease-in-out 4 alternate forwards; 
    will-change: transform; 
}
@keyframes floatBreathing { 
    0% { transform: translate3d(0, 0px, 0); } 
    100% { transform: translate3d(0, -3px, 0); } 
}

/* ğŸ”¥ ä¿®æ­£ 3ï¼šå¼·åˆ¶ç§»é™¤éµç›¤ä¸Šæ–¹ç©ºéš™ï¼Œè§£æ±ºåœ–ä¸€å•é¡Œ */
.keyboard { 
    display: flex; flex-direction: column; gap: 8px; 
    margin-top: 0 !important; /* ç¢ºä¿æ²’æœ‰ä»»ä½•å¤šé¤˜çš„ margin å°‡å®ƒæ¨ä¸‹å» */
}
.suit-row { display: grid; grid-template-columns: repeat(9, 1fr); gap: 5px; }

.tile { aspect-ratio: 3/4; background-color: #fcfaf9; border-radius: 6px; cursor: pointer; box-shadow: 0 4px 8px rgba(0,0,0,0.1), inset 0 -2px 1px rgba(0,0,0,0.05); width: 100%; height: auto; background-size: 85%; background-position: center; background-repeat: no-repeat; color: #1e293b; transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s; will-change: transform; }
.is-tapped-tile { animation: none !important; transform: translate3d(0, 2px, 0) scale(0.92) !important; box-shadow: 0 1px 2px rgba(0,0,0,0.1), inset 0 -1px 0 rgba(0,0,0,0.05) !important; transition: none !important; }
.is-tapped-chip { transform: scale(0.92) !important; transition: none !important; opacity: 0.8; }
.is-tapped-island { transform: scale(0.96) translateZ(0) !important; transition: none !important; }

/* ==== âœ¨ 3. æš—ç‰Œå€ç©ºæ§½ (çœŸãƒ»å†°å¡Šä¸‹å‡¹æŒ–æ§½è³ªæ„Ÿ) ==== */
.tile.empty { 
    background-image: none !important; 
    
    /* ğŸŒŸ æ¥µè‡´æ¸…é€ï¼Œåªç•™ 10% çš„ç™½ */
    background-color: rgba(255, 255, 255, 0.1); 
    backdrop-filter: blur(8px) saturate(120%);
    -webkit-backdrop-filter: blur(8px) saturate(120%);
    
    /* ğŸŒŸ æ¨¡æ“¬ç‰©ç†ä¸‹å‡¹ï¼šé‚Šæ¡†åè½‰ï¼Œä¸‹æ–¹èˆ‡å³æ–¹å—å…‰ï¼Œä¸Šæ–¹æš— */
    border: 1px solid rgba(255, 255, 255, 0.15); 
    border-bottom: 1px solid rgba(255, 255, 255, 0.5); 
    border-right: 1px solid rgba(255, 255, 255, 0.3); 
    
    /* ğŸŒŸ å…§éƒ¨é™°å½±ï¼šç‡Ÿé€ å‡¹é™·æ„Ÿ */
    box-shadow: inset 0 3px 8px rgba(0, 0, 0, 0.08), inset 0 1px 2px rgba(0, 0, 0, 0.05); 
    cursor: default; 
}

/* ==== âœ¨ 4. æ¸…é™¤æŒ‰éˆ• (çœŸãƒ»å†°å¡Šç»ç’ƒæ“¬æ…‹) ==== */
.clear-btn { 
    background: rgba(255, 255, 255, 0.2) !important; 
    backdrop-filter: blur(16px) saturate(150%);
    -webkit-backdrop-filter: blur(16px) saturate(150%);
    
    /* ğŸŒŸ 3D é‚Šç·£é«˜å…‰ */
    border: 1px solid rgba(255, 255, 255, 0.2) !important; 
    border-top: 1px solid rgba(255, 255, 255, 0.8) !important; 
    border-left: 1px solid rgba(255, 255, 255, 0.5) !important; 
    box-shadow: inset 0 1px 1px rgba(255, 255, 255, 0.9), 0 4px 12px rgba(0, 0, 0, 0.05) !important; 
    
    border-radius: 20px !important; 
    color: #475569 !important; 
    padding: 5px 12px !important; 
    font-size: 12px !important; 
    line-height: 1 !important; 
    font-weight: 600 !important; 
    cursor: pointer; 
    transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), background 0.2s, border-color 0.2s, color 0.2s, box-shadow 0.2s; 
    will-change: transform; 
}

.install-btn { background: linear-gradient(135deg, #3b82f6, #8b5cf6); border: 1px solid rgba(255, 255, 255, 0.3); color: white; padding: 12px 24px; border-radius: 20px; font-size: 15px; font-weight: 600; letter-spacing: 1px; cursor: pointer; display: none; box-shadow: 0 8px 20px rgba(59, 130, 246, 0.3), inset 0 1px 1px rgba(255,255,255,0.4); margin: 10px auto 0 auto; backdrop-filter: blur(10px); transition: transform 0.2s ease; position: relative; overflow: hidden; }
.install-btn::before { content: ""; position: absolute; top: 0; left: -150%; width: 50%; height: 100%; background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.5) 50%, rgba(255,255,255,0) 100%); transform: skewX(-25deg); animation: diamondShimmer 6s infinite; pointer-events: none; }
@keyframes diamondShimmer { 0% { left: -150%; } 15% { left: 200%; } 100% { left: 200%; } }

.footer-credit { 
    text-align: center; 
    font-size: 11px; 
    font-weight: 400; 
    color: #94a3b8; 
    letter-spacing: 0.5px; 
    
    /* ğŸ”¥ æ ¸å¿ƒä¿®æ”¹ï¼šå°‡ç‰ˆæ¬Šæ–‡å­—ä¸‹æ–¹çš„å¤šé¤˜ç©ºéš™å¾¹åº•ç§»é™¤ */
    margin-bottom: 0px; 
    
    display: flex; 
    flex-direction: column; 
    gap: 4px; 
    margin-top: 15px; 
    padding-top: 5px; 
}

.version-num { font-size: 10px; opacity: 0.8; }

#statusCard::after { 
    content: ""; position: absolute; inset: -2px; border-radius: inherit; z-index: -2; pointer-events: none; 
    /* ç›´æ¥é–å®šåœ¨å…‰æšˆæœ€æ¼‚äº®ã€æœ€é£½æ»¿çš„ç‹€æ…‹ï¼Œå–æ¶ˆç„¡é™å‹•ç•« */
    box-shadow: 0 0 25px rgba(125, 211, 252, 0.5), inset 0 0 15px rgba(255, 255, 255, 0.6); 
    opacity: 0.8; 
    transition: opacity 0.8s ease; 
}
/* åˆªé™¤åŸæœ‰çš„ @keyframes ambientBreath å€å¡Š */
.jelly-squish { animation: jellySquish 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); transform-origin: top center; }
.jelly-stretch { animation: jellyStretch 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); transform-origin: top center; }
#keyboard.jelly-squish, #keyboard.jelly-stretch { animation-delay: 0.05s; }

/* ==== âœ¨ v2.6.0ï¼šå‹•æ…‹å³¶ã€Œç³»çµ±æ›´æ–°ã€ç‹€æ…‹è®Šèº« ==== */
.dynamic-island.update-ready {
    border-color: rgba(234, 179, 8, 0.6); /* è®ŠæˆæŸ”å’Œçš„é‡‘è‰²é‚Šæ¡† */
    /* åŠ å…¥é‡‘è‰²çš„å¾…æ©Ÿå‘¼å¸å…‰ */
    animation: islandUpdateBreathe 2s cubic-bezier(0.4, 0, 0.6, 1) infinite alternate;
}

/* ==== âœ¨ v2.6.2ï¼šå‹•æ…‹å³¶ã€Œç³»çµ±æ›´æ–°ã€ç‹€æ…‹çš„æ©«å‘å½ˆæ€§æ‹‰ä¼¸ ==== */
.dynamic-island.update-ready:not(.expanded) {
    max-width: 280px; /* çµ¦äºˆè¶³å¤ çš„å¯¬åº¦ï¼Œå®Œç¾å®¹ç´æ•´å¥æ›´æ–°æ–‡å­— */
}

@keyframes islandUpdateBreathe {
    0% { box-shadow: 0 8px 24px rgba(234, 179, 8, 0.15), inset 0 1px 1px rgba(255, 255, 255, 0.8); }
    100% { box-shadow: 0 8px 36px rgba(234, 179, 8, 0.5), inset 0 1px 1px rgba(255, 255, 255, 0.8); }
}
/* ==== âœ¨ v2.8.0ï¼šæ¥µè‡´æµæš¢çš„é‚Šç·£å…‰æšˆå›é¥‹ ==== */
.edge-glow {
    position: fixed; left: 0; width: 100%; height: 150px;
    pointer-events: none; opacity: 0; z-index: 9999;
    will-change: opacity, transform; /* å¼·åˆ¶é–‹å•Ÿ GPU ç¡¬é«”åŠ é€Ÿ */
    transition: opacity 0.3s ease-out, transform 0.3s ease-out;
}
.edge-top {
    top: 0;
    /* æŸ”å’Œçš„é ‚éƒ¨ç™½å…‰æ¼¸å±¤ */
    background: radial-gradient(ellipse at top, rgba(255,255,255,0.6) 0%, transparent 70%);
    transform: scaleY(0.3) translateY(-20px);
    transform-origin: top;
}
.edge-bottom {
    bottom: 0;
    /* æŸ”å’Œçš„åº•éƒ¨ç™½å…‰æ¼¸å±¤ */
    background: radial-gradient(ellipse at bottom, rgba(255,255,255,0.6) 0%, transparent 70%);
    transform: scaleY(0.3) translateY(20px);
    transform-origin: bottom;
}
/* ç•¶è¢«æ‹‰æ‰¯æ™‚è§¸ç™¼çš„ç‹€æ…‹ */
.edge-glow.is-pulling {
    opacity: 1;
    transform: scaleY(1) translateY(0);
}

/* ==== âœ¨ çˆ†æ£šå°ˆå±¬ï¼šæ·±ç¥ç€ç»ç’ƒåå…‰ SSR ç‰¹æ•ˆ (æ¥µè‡´çµ²æ»‘ GPU åŠ é€Ÿ) ==== */
.baau-pang-text {
    position: relative;
    display: inline-block;
    
    /* 1. é›™å±¤èƒŒæ™¯ï¼šä¸Šå±¤æ˜¯å‚¾æ–œç™½å…‰ï¼Œä¸‹å±¤æ˜¯æ·±ç¥ç€è‰²åº• */
    background-image: 
        /* è¡¨å±¤ï¼šå‚¾æ–œ 135 åº¦çš„éŠ³åˆ©ç™½å…‰ (æ¨¡æ“¬ç»ç’ƒ/å£“å…‹åŠ›åå…‰) */
        linear-gradient(
            135deg, 
            rgba(255, 255, 255, 0) 40%, 
            rgba(255, 255, 255, 0.9) 50%, 
            rgba(255, 255, 255, 0) 60%
        ),
        /* åº•å±¤ï¼šæ²‰ç©©çš„æ·±ç¥ç€è‰² (åŠ ä¸€é»é»æ¥µå¾®å¼±çš„ä¸Šä¸‹æ·±æ·ºè®ŠåŒ–ï¼Œå¢åŠ å¯¦é«”åšé‡æ„Ÿ) */
        linear-gradient(to bottom, #d97706, #92400e);
        
    /* ä¸Šå±¤(ç™½å…‰)æ”¾å¤§æˆ 200% æ–¹ä¾¿ç”¢ç”Ÿæ»‘å‹•è·é›¢ï¼Œä¸‹å±¤(ç¥ç€åº•)ä¿æŒ 100% å›ºå®š */
    background-size: 200% 200%, 100% 100%;
    
    /* èµ·å§‹ä½ç½®ï¼šç™½å…‰åœ¨å³ä¸‹æ–¹å¤–å´ï¼Œç¥ç€åº•å›ºå®šåœ¨å·¦ä¸Šè§’ (0 0) */
    background-position: 200% 200%, 0 0;
    
    background-repeat: no-repeat;
    color: transparent;
    -webkit-background-clip: text;
    background-clip: text;
    
    /* 2. éœæ…‹å»£åŸŸæŸ”å’Œå…‰æšˆ (ä¿ç•™å¤–åœæ©˜é‡‘è‰²çš„ç¥è–æ„Ÿ) */
    filter: 
        drop-shadow(0px 0px 8px rgba(255, 255, 255, 0.6)) 
        drop-shadow(0px 0px 25px rgba(245, 158, 11, 0.8));
        
    /* ğŸŒŸ æå‰å®£å‘Š GPU åŠ é€Ÿæº–å‚™ */
    will-change: transform, background-position;
    
    /* å•Ÿå‹•ä¸‰é‡å‹•ç•«ï¼šç¥è–æ‡¸æµ®å‘¼å¸ + ç»ç’ƒåå…‰æƒæ  */
    animation: 
        holyFloatSmooth 2.5s ease-in-out infinite alternate,
        glassGlareSweep 3s cubic-bezier(0.25, 0.1, 0.25, 1) infinite !important;
}

/* 3. åå­—æ˜ŸèŠ’ç²’å­ (å·¦ä¸Šè§’ä¸»æ˜Ÿ - ä¿æŒä¸è®Š) */
.baau-pang-text::before {
    content: 'âœ¦';
    position: absolute;
    top: -15px;
    left: -20px;
    font-size: 28px;
    color: #fffbeb;
    text-shadow: 0 0 10px #fcd34d;
    z-index: 10;
    pointer-events: none;
    will-change: transform, opacity;
    animation: starTwinkleSmoothA 2s ease-in-out infinite alternate;
}

/* 3. åå­—æ˜ŸèŠ’ç²’å­ (å³ä¸‹è§’å‰¯æ˜Ÿ - ä¿æŒä¸è®Š) */
.baau-pang-text::after {
    content: 'âœ¦';
    position: absolute;
    bottom: -5px;
    right: -15px;
    font-size: 20px;
    color: #ffffff;
    text-shadow: 0 0 8px #f59e0b;
    z-index: 10;
    pointer-events: none;
    will-change: transform, opacity;
    animation: starTwinkleSmoothB 2.5s ease-in-out infinite alternate-reverse;
}

/* ==== ğŸŒŸ å‹•ç•«é—œéµå½±æ ¼ ==== */

/* ğŸŒŸ æ–°å¢ï¼šç»ç’ƒåå…‰æƒæ å‹•ç•« (åªç§»å‹•ä¸Šå±¤ç™½å…‰ï¼Œåº•è‰²ç¶­æŒä¸å‹•) */
@keyframes glassGlareSweep {
    0% { background-position: 200% 200%, 0 0; }
    35% { background-position: -100% -100%, 0 0; } /* ç™½å…‰è¿…é€Ÿå¾å³ä¸‹è§’æƒéå·¦ä¸Šè§’ */
    100% { background-position: -100% -100%, 0 0; } /* å‰©ä¸‹çš„æ™‚é–“åœé “ï¼Œç‡Ÿé€ æœ‰ç¯€å¥çš„åå…‰æ„Ÿ */
}

/* ç¥è–æ‡¸æµ® (ä¿æŒä¸è®Š) */
@keyframes holyFloatSmooth {
    0% { transform: scale(1) translateY(0) translateZ(0); }
    100% { transform: scale(1.06) translateY(-3px) translateZ(0); }
}

/* æ˜ŸèŠ’é–ƒçˆæ—‹è½‰ A (ä¿æŒä¸è®Š) */
@keyframes starTwinkleSmoothA {
    0% { transform: scale(0.4) rotate(0deg) translateZ(0); opacity: 0.2; }
    100% { transform: scale(1.1) rotate(45deg) translateZ(0); opacity: 1; }
}

/* æ˜ŸèŠ’é–ƒçˆæ—‹è½‰ B (ä¿æŒä¸è®Š) */
@keyframes starTwinkleSmoothB {
    0% { transform: scale(0.3) rotate(15deg) translateZ(0); opacity: 0.1; }
    100% { transform: scale(1.3) rotate(-30deg) translateZ(0); opacity: 0.9; }
}

/* ==== âœ¨ ç•ªæ•¸æ¨™ç±¤ç¨€æœ‰åº¦ç³»çµ± (Rarity Tiers) ==== */

/* ç¢ºä¿åŸºç¤æ¨™ç±¤æœ‰å¹³æ»‘éæ¸¡æ•ˆæœ */
.pattern-tag {
    transition: all 0.3s ease;
}

/* ğŸ”˜ éšç´š 1ï¼šæ™®é€šç´š Common (1~2ç•ª) - ä¹¾æ·¨ç°¡ç´„ */
.pattern-tag.tier-common {
    background-color: #f1f5f9;
    color: #475569;
    border: 1px solid #e2e8f0;
    box-shadow: none;
}

/* ğŸ”µ éšç´š 2ï¼šç¨€æœ‰ç´š Rare (3~6ç•ª) - ç²¾ç·»å¯¶çŸ³æ¼¸å±¤ */
.pattern-tag.tier-rare {
    background: linear-gradient(135deg, #0ea5e9, #2dd4bf);
    color: #ffffff;
    border: 1px solid transparent;
    box-shadow: 0 2px 8px rgba(14, 165, 233, 0.4);
    text-shadow: 0 1px 2px rgba(0,0,0,0.1);
}

/* ğŸŸ£ éšç´š 3ï¼šå²è©©ç´š Epic (7~9ç•ª) - é«˜éšå¹»å½©èˆ‡éœ“è™¹ç™¼å…‰ */
.pattern-tag.tier-epic {
    background: linear-gradient(135deg, #8b5cf6, #ec4899);
    color: #ffffff;
    border: 1px solid transparent;
    box-shadow: 0 0 12px rgba(236, 72, 153, 0.6);
    text-shadow: 0 1px 3px rgba(0,0,0,0.2);
    font-weight: 500;
}

/* ğŸŸ¡ éšç´š 4ï¼šå‚³èªªç´š Legendary (10ç•ªä»¥ä¸Š) - ç¥è–ç¥ç€èˆ‡é»ƒé‡‘å…‰æšˆ */
.pattern-tag.tier-legendary {
    background: linear-gradient(to bottom, #d97706, #92400e);
    color: #fef3c7;
    border: 1px solid #fcd34d;
    box-shadow: 0 0 15px rgba(245, 158, 11, 0.8), inset 0 0 5px rgba(255, 255, 255, 0.2);
    text-shadow: 0 0 6px rgba(253, 230, 138, 0.6);
    font-weight: 600;
}

/* ==== âœ¨ æ¨™ç±¤é€²å ´å‹•ç•«å¼•æ“ (é€ä¸€æ­æ›‰èˆ‡å½ˆæ€§ç‰©ç†) ==== */

/* 1. æ½›ä¼é å‚™ç‹€æ…‹ï¼šéš±è—ã€ä¸‹æ²‰ã€ç¸®å° */
.pattern-tag.hide-tag {
    opacity: 0 !important;
    transform: translateY(20px) scale(0.8);
    pointer-events: none; /* éš±è—æ™‚ä¸å¯é»æ“Š */
}

/* 2. åŸºç¤å½ˆæ€§é€²å ´ï¼šæ™®é€šèˆ‡ç¨€æœ‰ç´šæ¨™ç±¤ (å¹³æ»‘ Q å½ˆ) */
.pattern-tag.pop-in-tag {
    opacity: 1;
    transform: translateY(0) scale(1);
    /* ä½¿ç”¨ cubic-bezier å‰µé€ è¶…é 100% å†ç¸®å›ä¾†çš„å½ˆç°§ç‰©ç†æ•ˆæœ */
    animation: tagSpringUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

/* 3. å²è©©ç´šéœ‡æ’¼é€²å ´ (æ›´èª‡å¼µçš„å½ˆè·³ + ç¬é–“é«˜å…‰) */
.pattern-tag.tier-epic.pop-in-tag {
    animation: tagSpringUpEpic 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.5) forwards;
}

/* 4. å‚³èªªç´šéœ¸æ°£é€²å ´ (æ¥µé™å½ˆè·³ + è€€çœ¼é–ƒå…‰) */
.pattern-tag.tier-legendary.pop-in-tag {
    animation: tagSpringUpLegendary 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.8) forwards;
}

/* ==== å‹•ç•«é—œéµå½±æ ¼ ==== */
@keyframes tagSpringUp {
    0% { opacity: 0; transform: translateY(20px) scale(0.8); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes tagSpringUpEpic {
    0% { opacity: 0; transform: translateY(25px) scale(0.6); filter: brightness(2); }
    100% { opacity: 1; transform: translateY(0) scale(1); filter: brightness(1); }
}

@keyframes tagSpringUpLegendary {
    0% { opacity: 0; transform: translateY(30px) scale(0.4); filter: brightness(3) drop-shadow(0 0 30px #fcd34d); }
    100% { opacity: 1; transform: translateY(0) scale(1); filter: brightness(1) drop-shadow(0 0 15px rgba(245, 158, 11, 0.8)); }
}